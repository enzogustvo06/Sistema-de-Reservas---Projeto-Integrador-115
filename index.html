<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sistema de Reservas ‚Äî UNIFSA</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- TELA DE LOGIN -->
  <div id="telaLogin" class="login-container" style="display:none;">
    <div class="login-box">
      <h2>Acesso ao Sistema</h2>

      <input id="loginUser" placeholder="Usu√°rio" autocomplete="username">
      <input id="loginSenha" placeholder="Senha" type="password" autocomplete="current-password">
      <button id="btnLogin" class="btn">Entrar</button>

      <p class="hint">
        * Contas s√£o criadas apenas pelo <b>ADM</b>.
      </p>
    </div>
  </div>

  <!-- HEADER -->
  <header>
    <div class="header-left">
      <img src="logounifsa2023.fw_.png" alt="Logo UNIFSA" class="logo-unifsa" />
      <div class="header-titles">
        <h1>Sistema de Reservas</h1>
        <span class="subtitle">Centro Universit√°rio Santo Agostinho ‚Äî UNIFSA</span>
      </div>
</div>

    <div class="header-user-box">

      <div class="unit-switch unit-switch--header" role="group" aria-label="Sele√ß√£o de unidade">
        <span class="unit-label">Unidade</span>
        <div class="unit-tabs" role="tablist" aria-label="Unidades">
          <button type="button" class="unit-tab" data-unidade="SEDE" id="tabUnidadeSEDE">Sede</button>
          <button type="button" class="unit-tab" data-unidade="ANEXO2" id="tabUnidadeANEXO2">Anexo II</button>
        </div>
      </div>

      
      <div class="user-info"><button id="btnAccountDrawer" class="user-avatar-btn" type="button" aria-label="Conta" title="Conta">
        <span class="user-avatar-icon" aria-hidden="true">üë§</span>
      </button>
        <span class="user-name"><span class="user-name-label">Logado:</span> <span id="usuarioLogadoNome" class="user-name-value"></span></span>
      </div>

    </div>
  </header>

  <!-- Abas principais -->
  <nav class="tabs" aria-label="Abas principais">
    <div class="tab active" data-aba="pessoas">Pessoas</div>
    <div class="tab" data-aba="equipamentos">Equipamentos</div>
    <div class="tab" data-aba="emprestimos">Empr√©stimos</div>
    <div class="tab" data-aba="danificados" id="tabDanificados">Danificados</div>
    <div class="tab" data-aba="remocoes" id="tabRemocoes">Remo√ß√µes</div>
    <div class="tab" data-aba="relatorios">Relat√≥rios</div>
    <div class="tab" data-aba="usuarios" id="tabUsuarios">Usu√°rios (ADM)</div>
  </nav>

  <main class="container">

    <!-- Pessoas -->
    <section id="pessoas" class="tab-content active">
      <div class="section-header">
        <div>
          <h2>Pessoas</h2>
          <p class="muted">Cadastre e gerencie pessoas do sistema.</p>
        </div>
      </div>

      <div class="card">
        <h3>Registrar Pessoa</h3>
        <div class="grid grid-4">
          <div class="field">
            <label>Nome</label>
            <input id="nome" placeholder="Nome"/>
          </div>
          <div class="field">
            <label>Telefone</label>
            <input id="telefone" placeholder="Telefone"/>
          </div>
          <div class="field">
            <label>Curso</label>
            <input id="curso" placeholder="Curso"/>
          </div>
          <div class="field">
            <label>Fun√ß√£o</label>
            <select id="funcao">
              <option value="">Selecione</option>
              <option value="Aluno">Aluno</option>
              <option value="Professor">Professor</option>
              <option value="Colaborador">Colaborador</option>
            </select>
          </div>
        </div>
        <div class="actions">
          <button id="btnRegistrarPessoa" class="btn">Registrar</button>
        </div>
      </div>

      <div class="card">
        <div class="between">
          <h3>Lista de Pessoas</h3>
          <div class="tabs tabs-mini" role="tablist" aria-label="Filtro de pessoas">
            <div class="tab active" onclick="mostrarPessoasPorTipo('Aluno', this)">Alunos</div>
            <div class="tab" onclick="mostrarPessoasPorTipo('Professor', this)">Professores</div>
            <div class="tab" onclick="mostrarPessoasPorTipo('Colaborador', this)">Colaboradores</div>
          </div>
        </div>

        <div class="filter-row">
          <input id="searchPessoas" class="search-input" placeholder="Pesquisar pessoas (nome, telefone, curso, etc.)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('pessoas')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaPessoas">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Telefone</th>
                <th>Curso</th>
                <th>Fun√ß√£o</th>
                <th style="width:180px">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Equipamentos -->
    <section id="equipamentos" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Equipamentos</h2>
          <p class="muted">Controle de patrim√¥nio e disponibilidade.</p>
        </div>
      </div>

      <div class="card">
        <h3>Registrar Equipamento</h3>
        <div class="grid grid-3">
          <div class="field">
            <label>Nome</label>
            <input id="nomeEquipamento" placeholder="Nome do Equipamento"/>
          </div>
          <div class="field">
            <label>Patrim√¥nio</label>
            <input id="patrimonio" placeholder="N√∫mero do Patrim√¥nio"/>
          </div>
          <div class="field">
            <label>Quantidade</label>
            <input id="quantidade" type="number" min="1" placeholder="Quantidade"/>
          </div>
        </div>
        <div class="actions">
          <button id="btnRegistrarEquip" class="btn">Registrar</button>
        </div>
      </div>

      <div class="card">
        <h3>Lista de Equipamentos</h3>

        <div class="filter-row">
          <input id="searchEquipamentos" class="search-input" placeholder="Pesquisar equipamentos (nome, patrim√¥nio, status, etc.)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('equipamentos')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaEquipamentos">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Patrim√¥nio</th>
                <th>Dispon√≠vel</th>
                <th>Total</th>
                <th>Danificados</th>
                <th>Status</th>
                <th style="width:180px">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Empr√©stimos -->
    <section id="emprestimos" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Empr√©stimos</h2>
          <p class="muted">Registre empr√©stimos e devolu√ß√µes com rastreio.</p>
        </div>
      </div>

      <div class="card">
        <h3>Registrar Empr√©stimo</h3>
        <div class="grid grid-3">
          <div class="field">
            <label>Pessoa</label>
            <div class="combo">
            <input id="alunoEmprestimo" class="combo-input" type="text" placeholder="Digite para buscar e selecionar a pessoa" autocomplete="off" />
            <div id="alunoEmprestimoList" class="combo-list" style="display:none;"></div>
          </div>
          </div>
          <div class="field">
            <label>Equipamento</label>
            <div class="combo">
            <input id="equipEmprestimo" class="combo-input" type="text" placeholder="Digite para buscar e selecionar o equipamento" autocomplete="off" />
            <div id="equipEmprestimoList" class="combo-list" style="display:none;"></div>
          </div>
          </div>
          <div class="field" style="display:flex; align-items:end;">
            <button id="btnEmprestar" class="btn">Emprestar</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Registrar Devolu√ß√£o</h3>
        <div class="grid grid-4">
          <div class="field">
            <label>Empr√©stimo</label>
            <div class="combo">
            <input id="devolucaoSelect" class="combo-input" type="text" placeholder="Digite para buscar e selecionar o empr√©stimo" autocomplete="off" />
            <div id="devolucaoSelectList" class="combo-list" style="display:none;"></div>
          </div>
          </div>
          <div class="field">
            <label>Status</label>
            <select id="statusDevolucao">
              <option value="Funcionando">Funcionando</option>
              <option value="Danificado">Danificado</option>
            </select>
          </div>
          <div class="field">
            <label>Observa√ß√µes</label>
            <input id="notaDevolucao" placeholder="Observa√ß√µes"/>
          </div>
          <div class="field" style="display:flex; align-items:end;">
            <button id="btnDevolver" class="btn">Devolver</button>
          </div>
        </div>

        <!-- Foto do equipamento (aparece no layout mobile) -->
        <div class="mobile-photo">
          <div class="field">
            <label>Foto do equipamento (opcional)</label>
            <input id="fotoDevolucaoInput" type="file" accept="image/*" capture="environment">
            <p class="muted" style="margin:6px 0 0;">Use para registrar o estado do equipamento no momento da devolu√ß√£o.</p>
          </div>

          <div class="photo-preview" id="fotoDevolucaoBox" style="display:none;">
            <img id="fotoDevolucaoPreview" alt="Pr√©via da foto do equipamento" />
            <button id="btnRemoverFotoDevolucao" class="btn btn-ghost" type="button">Remover foto</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="between">
          <h3>Hist√≥rico de Empr√©stimos</h3>
          <div class="tabs tabs-mini" role="tablist" aria-label="Filtro de empr√©stimos">
            <div class="tab active" onclick="mostrarEmprestimos('Aluno', this)">Alunos</div>
            <div class="tab" onclick="mostrarEmprestimos('Professor', this)">Professores</div>
            <div class="tab" onclick="mostrarEmprestimos('Colaborador', this)">Colaboradores</div>
          </div>
        </div>

        <div class="filter-row">
          <input id="searchEmprestimos" class="search-input" placeholder="Pesquisar no hist√≥rico (pessoa, patrim√¥nio, datas, status, observa√ß√£o, etc.)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('emprestimos')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaEmprestimos">
            <thead>
              <tr>
                <th>Equipamento</th>
                <th>Nome</th>
                <th>Curso</th>
                <th>Fun√ß√£o</th>
                <th>Status</th>
                <th>Observa√ß√£o</th>
                <th>Data Empr√©stimo</th>
                <th>Data Devolu√ß√£o</th>
                <th>Registrado por</th>
                <th>Devolvido por</th>
                <th style="width:120px">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Danificados -->
    <section id="danificados" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Danificados</h2>
          <p class="muted">Equipamentos devolvidos danificados (com foto e observa√ß√£o, quando houver).</p>
        </div>
      </div>

      <div class="card">
        <h3>Lista de Danificados</h3>

        <div class="filter-row">
          <input id="searchDanificados" class="search-input" placeholder="Pesquisar danificados (equipamento, patrim√¥nio, pessoa, observa√ß√£o, etc.)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('danificados')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaDanificados">
            <thead>
              <tr>
                <th>Equipamento</th>
                <th>Patrim√¥nio</th>
                <th>Pessoa</th>
                <th>Data</th>
                <th>Observa√ß√£o</th>
                <th>Foto</th>
                <th>Status</th>
                <th style="width:240px">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <p class="muted" style="margin-top:10px;">
          Regras: quando uma devolu√ß√£o √© marcada como <b>Danificado</b>, ela aparece aqui automaticamente. Apenas o <b>ADM</b> pode marcar como consertado (voltar para dispon√≠vel) ou dar baixa (sem conserto).
        </p>
      </div>
    </section>

    <!-- Remo√ß√µes -->
    <section id="remocoes" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Remo√ß√µes</h2>
          <p class="muted">Hist√≥rico de baixas/remo√ß√µes (vis√≠vel para ADM e Funcion√°rios).</p>
        </div>
      </div>

      <div class="card">
        <h3>Hist√≥rico de Remo√ß√µes</h3>

        <div class="filter-row">
          <input id="searchRemocoes" class="search-input" placeholder="Pesquisar remo√ß√µes (nome, patrim√¥nio, justificativa, data, respons√°vel, etc.)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('remocoes')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaRemocoes">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Patrim√¥nio</th>
                <th>Justificativa</th>
                <th>Data</th>
                <th>Removido por</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Relat√≥rios -->
    <section id="relatorios" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Relat√≥rios</h2>
          <p class="muted">Filtre por datas e imprima.</p>
        </div>
      </div>

      <div class="card">
        
        <h3>Gerar Relat√≥rio</h3>
        <div class="grid grid-4">
          <div class="field">
            <label>De</label>
            <input type="date" id="relDataInicio">
          </div>
          <div class="field">
            <label>At√©</label>
            <input type="date" id="relDataFim">
          </div>
          <div class="field">
            <label>Tipo</label>
            <select id="relTipo">
              <option value="emprestimos">Empr√©stimos</option>
              <option value="danificados">Danificados</option>
            </select>
          </div>
          <div class="field">
            <label>Fun√ß√£o</label>
            <select id="relFuncao">
              <option value="todos">Todas</option>
              <option value="Aluno">Aluno</option>
              <option value="Professor">Professor</option>
              <option value="Colaborador">Colaborador</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button id="btnGerarRel" class="btn">Gerar</button>
          <button id="btnImprimirRel" class="btn btn-ghost" type="button">Imprimir</button>
        </div>
</div>

        <div class="relatorio-box" id="listaRelatorio"></div>
      </div>
    </section>

    <!-- Usu√°rios (ADM) -->
    <section id="usuarios" class="tab-content">
      <div class="section-header">
        <div>
          <h2>Usu√°rios</h2>
          <p class="muted">Gerencie contas de acesso (apenas ADM).</p>
        </div>
      </div>

      <div class="card">
        <h3>Criar Usu√°rio</h3>
        <div class="grid grid-3">
          <div class="field">
            <label>Usu√°rio</label>
            <input id="novoUsuario" placeholder="Usu√°rio"/>
          </div>
          <div class="field">
            <label>Senha</label>
            <input id="novaSenha" placeholder="Senha" type="password"/>
          </div>
          <div class="field">
            <label>Cargo</label>
            <select id="novoCargo">
              <option value="funcionario">Funcion√°rio</option>
              <option value="admin">Admin</option>
            </select>
          </div>
        </div>
        <div class="actions">
          <button id="btnCriarUsuario" class="btn">Criar</button>
          <button id="btnResetSistemaAdmin" class="btn btn-danger">Resetar Sistema</button>
        </div>
      </div>

      <div class="card">
        <h3>Lista de Usu√°rios</h3>

        <div class="filter-row">
          <input id="searchUsuarios" class="search-input" placeholder="Pesquisar usu√°rios (usu√°rio, cargo)" />
          <button class="btn btn-ghost btn-sm" type="button" onclick="limparPesquisa('usuarios')">Limpar</button>
        </div>

        <div class="table-wrap">
          <table id="tabelaUsuarios">
            <thead>
              <tr>
                <th>Usu√°rio</th>
                <th>Cargo</th>
                <th style="width:220px">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

  </main>

  <!-- MODAL (Edi√ß√£o) -->
  <div id="modal" class="modal" style="display:none;" aria-hidden="true">
    <div class="modal-backdrop" onclick="fecharModal()"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitulo">
      <div class="modal-header">
        <h3 id="modalTitulo">Editar</h3>
        <button class="btn btn-ghost" onclick="fecharModal()">Fechar</button>
      </div>
      <div id="modalBody" class="modal-body"></div>
      <div class="modal-footer">
        <button class="btn btn-ghost" onclick="fecharModal()">Cancelar</button>
        <button id="modalSalvar" class="btn">Salvar</button>
      </div>
    </div>
  </div>


  <!-- DRAWER DE CONTAS -->
  <div id="accountDrawerOverlay" class="drawer-overlay" style="display:none;"></div>

  <aside id="accountDrawer" class="drawer drawer-right" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">
        <h3>Conta</h3>
        <p class="drawer-subtitle">Troca r√°pida de usu√°rios</p>
      </div>
      <button id="btnCloseAccountDrawer" class="btn btn-ghost drawer-close" type="button" aria-label="Fechar">‚úï</button>
    </div>

    <div class="drawer-content">
      <section class="drawer-section">
        <h4 class="drawer-section-title">Usu√°rio atual</h4>
        <div class="current-user-card">
          <div class="current-user-row">
            <span class="current-user-label">Usu√°rio</span>
            <strong id="drawerUsuarioAtual">‚Äî</strong>
          </div>
          <div class="current-user-row">
            <span class="current-user-label">Perfil</span>
            <span id="drawerRoleAtual" class="role-pill" style="display:none;"></span>
          </div>
          <div class="current-user-row">
            <span class="current-user-label">Unidade</span>
            <span id="drawerUnidadeAtual">‚Äî</span>
          </div>

          <div class="current-user-actions">
            <button id="drawerBtnLogout" class="btn btn-danger" type="button">Sair</button>
          </div>
          <p class="drawer-hint">
            Dica: para n√£o deixar conta logada, clique em <b>Sair</b> ao terminar.
          </p>
        </div>
      </section>

      <section class="drawer-section">
        <h4 class="drawer-section-title">Trocar para</h4>
        <div id="drawerAccountsList" class="accounts-list"></div>
        <p class="drawer-hint">
          Contas salvas ficam apenas neste navegador.
        </p>
      </section>

      <section class="drawer-section">
        <h4 class="drawer-section-title">Adicionar conta</h4>
        <div class="form-grid form-grid--1">
          <label class="field">
            <span>Usu√°rio</span>
            <input id="drawerAddUser" placeholder="ex.: enzo" autocomplete="username" />
          </label>
          <label class="field">
            <span>Senha</span>
            <input id="drawerAddPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
          </label>

          <label class="checkbox-line">
            <input id="drawerRememberPass" type="checkbox" />
            <span>Salvar senha neste dispositivo (n√£o recomendado em PC compartilhado)</span>
          </label>

          <div class="drawer-actions">
            <button id="drawerBtnAddAccount" class="btn" type="button">Adicionar</button>
            <button id="drawerBtnLoginAccount" class="btn btn-secondary" type="button">Entrar</button>
          </div>
        </div>
      </section>
    </div>
  </aside>


  <script src="script.js"></script>
</body>
</html>
